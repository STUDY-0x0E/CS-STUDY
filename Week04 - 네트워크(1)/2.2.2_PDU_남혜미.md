# 2.2 네트워크


<aside>
💡 프로토콜(Protocol)

컴퓨터 내부에서, 또는 컴퓨터 사이에서 **데이터**의 **교환 방식**을 정의하는 **규칙 체계, 통신 규약 및 약속**
</aside>

## 2.2.2 PDU

### **PDU**

`PDU(Protocol Data Unit)`는 네트워크의 동일 통신 계층 간에 데이터가 전달될 때 한 덩어리의 **단위**를 의미한다.

- PDU = 헤더 (해당 계층의 헤더) + 페이로드 (전달 받은 데이터)

    = 프로토콜 제어 정보 + 실제 데이터

    = PCI(Protocol Control Information) + SDU(Service Data Unit)

`SDU(Service Date Unit)` 는 OSI 기본 참조 모델에서 정보 처리 단위로 교환되는 데이터 단위다. 

- 상향/하향 두 통신 계층 간에 전달되는 실제 데이터이다.
- PDU 에 격납되어 전송되면 논리적인 통신로의 종단에서 종단으로 전송되어도 변경되지 않는다.
    - SDU 가 PDU화 하기 위해, 쪼개지거나(fragment) 합쳐질 수(Agggregation) 있다.

<br>

### **계층별 명칭**

계층마다 명칭이 다르다.

![Untitled](https://github.com/STUDY-0x0E/CS-STUDY/assets/85321894/c64f8127-061a-41b2-8a76-b24265d8f648)


<br>

| TCP/IP 계층 | OSI 7 계층 | PDU |
| --- | --- | --- |
| 애플리케이션 계층 | 애플리케이션 계층 | 메시지 (데이터) |
|  | 프레젠테이션 계층 |  |
|  | 세션 계층 |  |
| 전송 계층 | 전송 계층 | 세그먼트 (TCP)
데이터 그램(UDP) |
| 인터넷 계층 | 네트워크 계층 | 패킷  |
| 링크 계층 | 데이터 링크 계층 | 프레임 |
|  | 물리 계층 | 비트 |

<br>

### **캡슐화 과정과 비캡슐화 과정**

캡슐화 과정은 상위 계층의 헤더와 데이터를 하위 계층의 데이터 부분에 포함시키고 해당 계층의 헤더를 삽입하는 과정

비캡슐화 과정은 하위 계층에서 상위 계층으로 가며 각 계층의 헤더 부분을 제거하는 과정

송신자의 애플리케이션 계층에서부터 각 계층에서 캡슐화를 통해 데이터가 생성되고 수신자의 링크 계층에서부터 각 계층에서 비캡슐화를 통해 데이터가 전달

![파일:OSI_7_계층.jpg](https://github.com/STUDY-0x0E/CS-STUDY/assets/85321894/6cf5ae68-2c5c-448c-955e-cdd9ca6e729f)

- 애플리케이션 계층의 데이터가 전송 계층으로 전달되면서 ‘세그먼트’ 또는 ‘데이터그램’화 되며 TCP(L4) 헤더가 붙여지게 된다.
- 이후 인터넷 계층으로 가면서 IP(L3) 헤더가 붙여지며 패킷화가 된다.
- 이후 링크 계층으로 전달되면서 프레임 헤더와 프레임 트레일러가 붙어 프레임화가 된다. (데이터 링크 계층에서만 트레일러 추가 가능)

<br>

### **PDU 테스팅**

애플리케이션 계층은 ‘메시지’를 기반으로 데이터를 전달하는데, HTTP 의 헤더가 문자열인 것을 확인할 수 있다.

> curl commands 온라인 사이트 링크 : [https://reqbin.com/curl](https://reqbin.com/curl)
> 
> 
> 
> curl (client url) 명령어는 프로토콜들을 이용해 URL로 데이터를 전송하여 서버에 데이터를 보내거나 가져올 때 사용하기 위한 명령줄 도구 및 라이브러리이다.
> 
> 커맨드라인 환경에서 REST API (http) 테스트 하고 싶으면 curl 명령어 이용하는 것과 비슷하다.
> 
> 보통 특정 서버에서 빠르게 방화벽 예외 상태를 테스트 하거나, REST 서비스 테스를 위해 사용되는 편이다.
> 
- ‘curl www.naver.com’ 이라는 명령어를 요청

![Untitled 2](https://github.com/STUDY-0x0E/CS-STUDY/assets/85321894/a55cc40a-3b07-4143-962f-01c41711f62c)

- 응답 (response) 헤더 값 : 모두 문자열

![Untitled 3](https://github.com/STUDY-0x0E/CS-STUDY/assets/85321894/1ac9b885-360a-44e9-b707-4f8c187c4fcf)


PDU 중 아래 계층인 **비트**로 송수신하는 것이 모든 PDU 중 가장 빠르고 효율성이 높다. 

하지만 **애플리케이션 계층**에서는 **문자열**을 기반으로 송수신을 하는데, 그 이유는 **헤더**에 authorization 값 등 **다른 값들을 넣는 확장이 쉽기 **때문**이다.
