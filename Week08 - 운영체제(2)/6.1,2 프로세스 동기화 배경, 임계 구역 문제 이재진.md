# 프로세스 동기화의 배경(필요성)

## 독립적인 프로세스
* 독립적인 프로세스 데이터 공유x, 메시지x -> 문제 발생 x

## 협력적인 프로세스
* 정보 공유(Information sharing) : 여러 사용자가 동일한 정보를 필요로 할 수 있다.
* 계산 가속화(Computation speedup) : 특정 작업을 빠르게 실행하기 위해, 해당 작업을 부분 작업으로 나눠서 병렬로 실행하게 할 수 있다.
* 모듈성(Modularity) : 특정한 시스템 기능을 별도의 프로세스(쓰레드)로 구분하여 모듈식 형태로 시스템을 구성할 수 있다.
* 편의성(Convenience) : 여러 사용자들이 동시에 많은 작업을 수행할 수 있다.

## 상호 협력적 프로세스들(Cooperating processes), 프로세스 간 통신(Inter-Process Communication,IPC)
* 상호협력적인 프로세스들은 서로 영향을 주거나 받을 수 있다.
* 상호협력적인 프로세스들은 논리적인 주소 공간(쓰레드)을 공유하거나 공유 데이터를 공유한다.
### 1. 공유 메모리(shared memory)
* 공유 메모리 영역을 구축하고 둘 이상의 프로세스가 공유 영역을 통해 자원이나 데이터를 주고 받는다.
* <img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fcg0dP7%2Fbtq3FetWffv%2FMK1Q2b9aQxsxeh2PHPtoT0%2Fimg.png"><img>
* 장점 : 커널 의존성이 낮기 때문에 처리속도가 빠르다, 유저 레벨에서 IPC가 가능하기 때문에 통신이 자유롭다.
* 단점 : 자원과 데이터를 공유하기 때문에 동기화 이슈가 발생한다.
### 2. 메시지 전송(message passing) 방식
* 여러 프로세스들끼리 커널을 통해서 메시지를 전달하는 방식으로 자원이나 데이터를 주고 받는다.
* <img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fda2h8a%2Fbtq3z40H5ey%2FnH2rgURiuKovNhIcypA2fk%2Fimg.png"><img>
* 장점 : 별도로 다른 것을 구축할 필요 없이 커널을 이용하기 때문에 구현이 비교적 쉽다.
* 단점 : 커널을 이용하기 때문에, 시스템 콜이 필요하며 이로 인해 오버헤드가 발생한다.

## 데이터 불일치(data inconsistency)
* 상호협력적인 프로세스들이 공유 데이터에 동시적으로 접근할 때 데이터 불일치 발생 가능
### 데이터 불일치 발생 요인
  1. 동시 실행(concurrent execution,동시성)
     - 어떤 한 프로세스가 실행하는 중에 인터럽트 발생, CPU 코어의 제어권이 또 다른 프로세스에게 선점될 수 있다.
     - 선점한 다른 프로세스는 기존 프로세스가 접근하고 있는 공유 자원에 접근하여 값을 바꾸는 상황이 발생하여 데이터의 불일치가 발생할 수 있다
  <img src="https://blog.kakaocdn.net/dn/bu73e2/btrGkcF5xyD/pOBj0rKS9CRBBQOH7oiWt0/img.png"><img>
     - 하나의 CPU 코어 내에서 여러 프로세스(또는 쓰레드)들을 빠르게 교차(Context Switching)하면서 한번에 하의 명령어만을 수행하는 방식, 동시에 실행되는 것처럼 보인다.
  2. 병렬 실행(parallel execution,병렬성)
     - 여러개의 CPU 코어에서 멀티스레드를 동작시키는 방식, 한 개 이상의 스레드를 포함하는 각 코어들이 '동시에' 실행되는 성질
     - 각각의 CPU 코어가 하나의 프로세스(또는 쓰레드)를 맡아서 실행한다.
     - 동시 실행과 달리 문맥교환이 일어나지 않고 쓰레드를 수행한다.
  <img src="https://blog.kakaocdn.net/dn/7JBVS/btrGgEwWBYM/txjJLxDRWKPU2e4zA3lDqK/img.png"><img>

### 데이터 불일치 예시

## 경쟁 상태(Race Condition)

### 경쟁 상태 발생 조건

### 경쟁 상태 방지 방

## 임계 구역(Critical-Section)

### 참조
* [https://blog.naver.com/akj61300/80126200460](https://blog.naver.com/akj61300/80126200460)
* [https://junghyungil.tistory.com/146](https://junghyungil.tistory.com/146)
