# 4.1 데이터 베이스의 기본

태그: 데이터베이스
날짜: 2023년 9월 19일
페이지: P.140

## 데이터 베이스


`데이터베이스(DB, DataBase)` 는 일정한 규칙, 혹은 규약을 통해 **구조화**되어 저장되는 **데이터의 모음**이다.

## DBMS


`DBMS(DataBase Management System)` 는 데이터 베이스를 **제어, 관리**하는 **통합 시스템**이다.

각 DBMS 마다 정의된 쿼리 언어(Query language) 를 통해 데이터 삽입, 삭제, 수정, 조회 등을 수행

## 릴레이션


`릴레이션(relation)`은 데이터베이스에서 정보를 구분하여 저장하는 기본 **단위**이다. 

**엔티티에 관한 데이터**를 데이터 베이스는 **릴레이션** 하나에 담아서 관리한다. 

- `테이블` : **관계형** 데이터 베이스 (**MySQL**)
    - 레코드(데이터)  - 테이블 - 데이터베이스 구조
- `컬렉션` : **NoSQL** 데이터 베이스 (**MonggoDB**)
    - 도큐먼트 - 컬렉션 - 데이터베이스 구조

## 엔티티


`엔티티(entity)` : **여러 개의 속성**을 지닌 **명사**를 의미한다. (회원) → 테이블

- **강한** 엔티티 : 약한 엔티티를 가지고 있는 엔티티
- **약한** 엔티티 : 강한 엔티티가 있어야 하는 엔티티 (종속적)

## 속성


`속성(attribute)`은 릴레이션에서 관리하는 구체적이며 고유한 이름(특성)을 갖는 정보이다. → 필드

- 엔티티가 가지고 잇는 정보 (사람, 장소, 물건, 사건, 개념 등)

## 도메인


`도메인(domain)` 은 릴레이션에 포함된 각각의 속성들이 가질 수 있는 값의 집합

- 속성이 성별인 경우 : {남, 여} 라는 집합이 도메인이 된다.

## 필드와 레코드


관계형 데이터 베이스 기반인 `테이블`은 `필드`와 `레코드`로 구성되어 있다.

- 테이블(엔티티) = 필드(속성) + 레코드(데이터)

### 필드 타입

- SQL 예제
    
    ```sql
    CREATE TABLE book{
    	id INT NOT NULL AUTO_INCREMENT, // 책의 아이디 : INT
    	title VARCHAR(225), // 책의 제목 : VARCHAR(225)
    	author_id INT, // 책의 저자 아이디 : INT
    	publishing_year VARCHAR(255), // 책의 출판년도 : VARCHAR(225)
    	genre VARCHAR(255), // 책의 장르 : VARCHAR(225)
    	created_at DATETIME, // 생성 일시 : DATETIME
    	updated_at DATETIME, // 업데이트 일시 : DATETIME
    	PRIMARY KEY (id)
    }
    ```
    

필드는 타입을 갖는다. (정확한 타입은 DBMS 마다 다르다.)

- MySQL **숫자** 타입
    
    
    | 타입 | 용량(바이트) | 최솟값(부호 있음) | 최솟값(부호 없음) | 최댓값(부호 없음) | 최댓값(부호 있음) |
    | --- | --- | --- | --- | --- | --- |
    | TINYINT | 1 | -128 | 0 | 127 | 255 |
    | SMALLINT | 2 | -32768 | 0 | 32767 | 65535 |
    | MEDIUMTIN | 3 | -8388608 | 0 | 8388607 | 16777215 |
    | INT | 4 | -2147483648 | 0 | 2147483647 | 4294967295 |
    | BIGINT | 8 | -263 | 0 | 263-1 | 264-1 |
- MySQL **날짜** 타입
    
    
    | 타입 | 용량(바이트) | 날짜 | 시간 | 범위 |
    | --- | --- | --- | --- | --- |
    | DATE  | 3 | o | x | 1000-01-01~9999-12-31 |
    | DATETIME | 8 | o | o | 1000-01-01 00:00:00 ~ 9999-12-31 23:59:59 |
    | TIMESTAMP | 4 | o | o | 1970-01-01 00:00:01 ~ 2038-01-19 03:14:07 |
- MySQL **문자** 타입
    
    
    | 타입 | 길이 | 길이 | 특징 |
    | --- | --- | --- | --- |
    | CHAR | 고정 길이 문자열 | 0~255 | CHAR(30) 인 경우, 1글자만 사용해도 30바이트로 저장 |
    | VARCHAR | 가변 길이 문자열 | 0~65,535 | VARCHAR(100) 인 경우 1글자 사용시 2바이트 저장(길이 기록용 1바이트)  |
- TEXT 와 BLOB
    
    두 개의 타입 모두 큰 데이터를 저장할 때 쓰는 타입
    
    - TEXT : 큰 문자열 (ex. 게시판 본문)
    - BLOB : 이미지, 동영상 등 큰 데이터 저장 (*아마존은 서버에 파일을 올리고 파일에 관한 경로를 VARCHAR 로 저장*)
    - 
- ENUM 과 SET
    
    모두 문자열 열거할 때 쓰는 타입이다.
    
    공간적 이점을 볼 수 있지만, 애플리케이션에 따라 수정이 필요할 수 있다.
    
    - ENUM
        
        ‘x-small’ (0,1), ‘small’, ‘medium’, ‘large’, ‘x-large’ 중 하나 선택하여 사용 (다른 형태 값이 들어가면 빈 문자열이 대신 저장된다.)
        
        최대 65,535개의 요소를 담을 수 있다.
        
    - SET
        
        여러개의 데이터를 담을 수 있다.
        
        비트 단위 연산이 가능하다. 최대 64개의 요소를 담을 수 있다.
        

## 관계


데이터베이스에는 다양한 테이블이 있고, 이 테이블들끼리 서로 관계가 정의되어 있다. 

![Untitled](4%201%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%87%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%8B%E1%85%B4%20%E1%84%80%E1%85%B5%E1%84%87%E1%85%A9%E1%86%AB%207b8a2d9069cd4b82bc5c2c5c49924e95/Untitled.png)

`관계 화살표` : 테이블 관계를 나타내는 화살표

1. 하나의 A는 하나의 B로 구성되어 있다.
2. 하나의 A는 하나 이상의 B로 구성되어 있다.
3. 하나의 A는 하나 이하의 B로 구성되어 있다.
4. 하나의 A는 0 또는 하나 이상의 B로 구성되어 있다.

`관계` 

- 1:1 관계 (유저테이블와 유저이메일테이블)
- 1:N 관계 (유저테이블와 장바구니테이블)
- N:N 관계 (학생테이블과 강의테이블)

## 키


테이블 간의 관계를 더 명확하게 나타내기 위한 설정

- 유일성 : 레코드(데이터)를 구별할 수 있는 필드(속성) 또는 필드의 집합 (주민번호, 이름+주민번호, 지역+주민번호, ..)
- 최소성 : 레코드를 구별할 수 있는 최소한의 필드 (주민번호)

**슈퍼키**

`슈퍼키(super key)` 는 각 레코드를 유일하게 식별할 수 있는 **유일성**을 갖춘 키 

**후보키**

`후보키(candidate key)` 는 기본키가 될 수 있는 후보들이며 **유일성**과 **최소성**을 동시에 만족하는 키

**대체키**

`대체키(alternate key)` 는 후보키가 두 개 이상일 경우 어느 하나를 기본키로 지정하고 남은 후보키

**기본키** 

`기본키(primary key aka PK)` 는 **유일성**과 **최소성**을 만족하는 키 (기본키를 통해서 레코드를 식별한다.)

기본키는 후보키이며 슈퍼키이다.

- `자연키`(UK) : 실제 정보를 담은 키 (변할 위험 O)
- `인조키`(PK) : 인위적으로 부여한 키 (변할 위험 X), 더 안정적이라 대부분 인조키 사용

**외래키**

`외래키(foreign key)` 는 다른 테이블의 기본키를 그대로 참조하는 값으로 개체와의 관계를 구별하는 데 사용된다.

- 외래키는 **중복**이 가능하다.
