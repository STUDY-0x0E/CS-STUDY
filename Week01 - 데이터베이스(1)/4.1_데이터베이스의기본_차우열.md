# 1. 데이터 베이스의 기본

데이터베이스(DB, DataBase)란 사람들이 사용할 목적으로 체계화해 통합, 관리하는 데이터의 집합이다. 

데이터 베이스를 제어, 관리하는 통합 시스템을 DBMS(DataBase Management System)라고 한다.  DBMS는 사용자가 데이터에 관한 정보를 효율적으로 구성, 복원 및 검색  수 있도록하는 응용프로그램이다.

데이터베이스 안에 있는 데이터들은 DBMS마다 정의된 쿼리 언어(query langueage)를 통해 삽입, 삭제, 수정, 조회 등을 수행할 수 있다.

데이터베이스 내의 데이터는 DBMS를 통해 응용프로그램과 연결된다.

추가)

### 스키마

데이터가 저장되는 형식을 결정하는 전반적인 구조

### DB의 특징

- 자가기술성:  데이터베이스는 자신에 대한 정의(스키마)와 설명(메타데이터)을 가지고 있다.
- 독립성: 데이터베이스 내의 데이터, 데이터 사용하는 사용자 및 응용프로그램, 데이터베이스의 저장 구조가 서로 영향을 받지 않는다.
- 추상화: 사용자에게 데이터에 대한 개념적인 표현을 제공한다.
- 다중 뷰 제공: 사용자에게 필요한 부분만을 추출하여 볼 수 있도록한다.
- 데이터 공유와 다수 사용자 트랜잭션 처리: 여러 사용자가 동시에 데이터에 접근가능하다. 동시성 제어 기능 통해 데이터 변경에 대한 제약조건으로 데이터의 일관성을 보장한다.

## 1-1. 엔터티(entity)

엔터티는 여러 개의 속성을 지닌 명사이다. ValueObject와 비슷하다. 

- 참고) [https://velog.io/@ha0kim/DAO-DTO-VO-차이](https://velog.io/@ha0kim/DAO-DTO-VO-%EC%B0%A8%EC%9D%B4)

엔터티는 약한 엔터티와 강한 엔터티로 나뉜다. 

다른 엔터티에 종속적이라면 약한 엔터티이고, 아니라면 강한 엔터티이다.

- ex) 건물과 방, 고객과 고객의 계좌

## 1-2. 릴레이션(relation)

릴레이션은 데이터베이스에서 정보를 구분하여 저장하는 기본단위이다.

엔터티는 데이터베이스에서 릴레이션 단위로 관리된다.

릴레이션은 관계형 데이터베이스에서는 ‘테이블’ NoSQL 데이터베이스에서는 ‘컬렉션’이라고 한다.

MySQL은 레코드-테이블-데이터베이스, MongoDB는 도큐먼트-컬렉션-데이터베이스 구조이다.

## 1-3 속성(attribute)

속성은 릴레이션에서 관리하는 구체적이며 고유한 이름을 갖는 정보이다.

서비스의 요구사항을 기반으로 관리할 필요가 있는 정보가 엔터티의 속성이 된다.

- ex) 차의 속성은 차량 번호, 차색깔, 차종 등

## 1-4 도메인(domain)

도메인은 릴레이션에 포함된 각각의 속성들이 가질 수 있는 값의 집합이다.

- ex) 성별이라는 속성의 남, 여

## 1-5 필드와 레코드

엔터티: 회원 → 테이블:member

속성: 이름, 아이디, 주소 → 필드: name, ID, address

테이블에 쌓이는 행 단위의 데이터를 레코드(튜플)라 한다.

각 속성을 테이블로 만들기 위해 필드에 적절한 타입을 정의해야한다.

### **필드의 타입**

필드가 가질 수 있는 타입은 DBMS마다 다르다.

MySQL의 대표적인 타입은 숫자, 날짜, 문자 타입이 있다.

### **숫자 타입**

숫자타입은 부호여부에 따라 범위가 변한다. 

- TINYINT: 1byte, -128 ~ 127(부호없음), 0 ~ 255(부호없음)
- SMALLINT: 2byte, -2^15 ~ 2^15 -1
- MEDIUMINT: 3byte, -2^23 ~ 2^23 -1
- INT: 4byte, -2^31 ~ 2^31 -1
- BIGINT: 8byte, 2^63 ~ 2^63 -1

### **날짜 타입**

- DATE: 3byte, 1000-01-01~9999-12-31
- DATETIME: 8byte, 1000-01-01 00:00:00~9999-12-31 23:59:59
- TIMESTAMP: 4byte, 1970-01-01 00:00:01~2038-01-19 03:14:07

### 문자 타입

CHAR와 VARCHAR는 수를 입력해서 몇 자까지 입력할지 정한다.

- CHAR: 고정 길이 문자열 0~255byte, CHAR(100)으로 선언하면 입력된 글자수와 상관없이 100byte
- VARCHAR: 가변 길이 문자열 0~65535 byte 입력된 글자수만큼 용량이 가변된다. 추가로 길이 기록용 1byte가 포함된다.

TEXT와 BLOB은 큰 데이터를 저장할 때 쓴다.

- TEXT는 큰 문자열 저장에 사용한다.
- BLOB은 이미지, 동영상 등의 큰 데이터 저장에 사용한다. 이미지, 동영상 등은 다른 서버에 올려진 파일에 대한 경로를 VARCHAR로 저장하기도 한다.

ENUM과 SET는 문자열을 열거한 타입이다.

- ENUM(’aaa’, ‘bbb’, ‘ccc’, ‘zzz’) 형태로 사용한다. 단일선택만 가능하고, ENUM리스트에 없는 값을 선택시 빈 문자열이 대신 삽입된다.
- SET는 비트단위 연산을 할 수 있고 최대 64개의 요소를 집어넣을 수 있다.

ENUM과 SET를 사용하면 공간 이득을 볼 수 있으나, 수정시 ENUM이나 SET의 목록을 수정해야할 수 있다.

## 1.6 관계

데이터베이스에서 관계는 관계 화살표로 나타낼 수 있다. → ERD
![Untitled](https://github.com/STUDY-0x0E/CS-STUDY/assets/69425431/f2992e1a-79f7-45f7-8093-709deb6ee93a)

- 1:1 관계: 하나의 레코드가 다른 테이블의 레코드 한 개와 연결된 경우이다. 1:1로 나타낼 수 있는 관계라면 같은 테이블에 둘 수 있다.
- 1:N 관계: 하나의 레코드가 서로 다른 여러 개의 레코드와 연결된 경우이다.
- N:M 관계: 여려개의 레코드가 다른 테이블의 여러개의 레코드와 관계가 있는 경우이다.
- 자기참조 관계: 테이블 내에서의 관계이다.
- 참고) [https://hanamon.kr/관계형-데이터베이스-설계-관계-종류/](https://hanamon.kr/%EA%B4%80%EA%B3%84%ED%98%95-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%84%A4%EA%B3%84-%EA%B4%80%EA%B3%84-%EC%A2%85%EB%A5%98/)

## 1.7 키

데이터베이스에서 조건에 만족하는 튜플을 찾거나 정렬하기 위해 구별할 수 있는 기준이 되는 속성.

유일성은 하나의 키값으로 유일하게 식별할 수 있는 성질이다.

최소성은 키를 구성하는 속성들 중 가장 최소로 필요한 속성들로만 키를 구성하는 성질이다.

![Untitled 1](https://github.com/STUDY-0x0E/CS-STUDY/assets/69425431/92bb7bec-d1e5-4bd4-9692-8f98c938beb1)


### 기본키

유일성과 최소성을 만족하는 키이다.

- 자연키: 중복된 값이 있는 속성들을 제외했을 때 남는 유일성을 지닌 속성.
- 인조키: 테이블 관리를 위해서 부여한 유일성을 갖는 속성.

### 외래키

다른 테이블의 기본키를 참조하여 개체와의 관계를 식별하는데 사용하는 속성. 중복될 수 있다.

### 후보키

기본키가 될 수 있는 후보. 유일성과 최소성을 만족한다.

### 대체키

후보키에서 기본키를 고르고 남은 유일성과 최소성이 있는 속성.

### 슈퍼키

최소성을 만족시키지 못하지만, 유일성을 만족하는 속성.
